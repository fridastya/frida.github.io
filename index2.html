<!DOCTYPE html>
<html>
	<head>
		<link rel="shortcut icon" type="image/x-icon" href="https://kominfo.batam.go.id/wp-content/uploads/sites/2/2018/02/cropped-cropped-LOGO_KOTA_BATAM-32x32.png" />
		<title>Digitalisasi Konten Kreatif dan Literasi Digital Tahun 2024 - Diskominfo Batam</title>
		<style>
			text{
        font-family:Helvetica, Arial, sans-serif;
        font-size:11px;
        pointer-events:none;
    }
    #chart{
        position:absolute;
        width:500px;
        height:500px;
        top:150px;
        left:300px;
    }
    #question{
        position: absolute;
        width:400px;
        height:500px;
        top:300px;
        left:1060px;
    }
    #question h1{
        font-size: 50px;
        font-weight: bold;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        position: absolute;
        padding: 0;
        margin: 0;
        top:50%;
        -webkit-transform:translate(0,-50%);
                transform:translate(0,-50%);
    }
		</style>
	</head>
	<body>
		<div style="margin: auto; text-align: center; font-family:Helvetica, Arial, sans-serif;">
			<img src="https://disbudpar.batam.go.id/wp-content/uploads/sites/22/2020/01/pemko-2-1024x724.png" height="50">
			<h1>Digitalisasi Konten Kreatif dan Literasi Digital Tahun 2024</h1>
			<h5>Dinas Komunikasi dan Informatika Kota Batam</h5>
		</div>
		<div>
			<div id="chart"></div>
    			<div id="question"><h1></h1></div>
		</div>

    		<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

	<script>
		var padding = {top:20, right:40, bottom:0, left:0},
            w = 750 - padding.left - padding.right,
            h = 750 - padding.top  - padding.bottom,
            r = Math.min(w, h)/2,
            rotation = 0,
            oldrotation = 0,
            picked = 100000,
            oldpick = [],
            color = d3.scale.category20();//category20c()
            //randomNumbers = getRandomNumbers();
        //http://osric.com/bingo-card-generator/?title=HTML+and+CSS+BINGO!&words=padding%2Cfont-family%2Ccolor%2Cfont-weight%2Cfont-size%2Cbackground-color%2Cnesting%2Cbottom%2Csans-serif%2Cperiod%2Cpound+sign%2C%EF%B9%A4body%EF%B9%A5%2C%EF%B9%A4ul%EF%B9%A5%2C%EF%B9%A4h1%EF%B9%A5%2Cmargin%2C%3C++%3E%2C{+}%2C%EF%B9%A4p%EF%B9%A5%2C%EF%B9%A4!DOCTYPE+html%EF%B9%A5%2C%EF%B9%A4head%EF%B9%A5%2Ccolon%2C%EF%B9%A4style%EF%B9%A5%2C.html%2CHTML%2CCSS%2CJavaScript%2Cborder&freespace=true&freespaceValue=Web+Design+Master&freespaceRandom=false&width=5&height=5&number=35#results
        var data = [
{"label":201,"value":201, "question":"Nomor Terpilih: 201"},
{"label":202,"value":202, "question":"Nomor Terpilih: 202"},
{"label":203,"value":203, "question":"Nomor Terpilih: 203"},
{"label":204,"value":204, "question":"Nomor Terpilih: 204"},
{"label":205,"value":205, "question":"Nomor Terpilih: 205"},
{"label":206,"value":206, "question":"Nomor Terpilih: 206"},
{"label":207,"value":207, "question":"Nomor Terpilih: 207"},
{"label":208,"value":208, "question":"Nomor Terpilih: 208"},
{"label":209,"value":209, "question":"Nomor Terpilih: 209"},
{"label":210,"value":210, "question":"Nomor Terpilih: 210"},
{"label":211,"value":211, "question":"Nomor Terpilih: 211"},
{"label":212,"value":212, "question":"Nomor Terpilih: 212"},
{"label":213,"value":213, "question":"Nomor Terpilih: 213"},
{"label":214,"value":214, "question":"Nomor Terpilih: 214"},
{"label":215,"value":215, "question":"Nomor Terpilih: 215"},
{"label":216,"value":216, "question":"Nomor Terpilih: 216"},
{"label":217,"value":217, "question":"Nomor Terpilih: 217"},
{"label":218,"value":218, "question":"Nomor Terpilih: 218"},
{"label":219,"value":219, "question":"Nomor Terpilih: 219"},
{"label":220,"value":220, "question":"Nomor Terpilih: 220"},
{"label":221,"value":221, "question":"Nomor Terpilih: 221"},
{"label":222,"value":222, "question":"Nomor Terpilih: 222"},
{"label":223,"value":223, "question":"Nomor Terpilih: 223"},
{"label":224,"value":224, "question":"Nomor Terpilih: 224"},
{"label":225,"value":225, "question":"Nomor Terpilih: 225"},
{"label":226,"value":226, "question":"Nomor Terpilih: 226"},
{"label":227,"value":227, "question":"Nomor Terpilih: 227"},
{"label":228,"value":228, "question":"Nomor Terpilih: 228"},
{"label":229,"value":229, "question":"Nomor Terpilih: 229"},
{"label":230,"value":230, "question":"Nomor Terpilih: 230"},
{"label":231,"value":231, "question":"Nomor Terpilih: 231"},
{"label":232,"value":232, "question":"Nomor Terpilih: 232"},
{"label":233,"value":233, "question":"Nomor Terpilih: 233"},
{"label":234,"value":234, "question":"Nomor Terpilih: 234"},
{"label":235,"value":235, "question":"Nomor Terpilih: 235"},
{"label":236,"value":236, "question":"Nomor Terpilih: 236"},
{"label":237,"value":237, "question":"Nomor Terpilih: 237"},
{"label":238,"value":238, "question":"Nomor Terpilih: 238"},
{"label":239,"value":239, "question":"Nomor Terpilih: 239"},
{"label":240,"value":240, "question":"Nomor Terpilih: 240"},
{"label":241,"value":241, "question":"Nomor Terpilih: 241"},
{"label":242,"value":242, "question":"Nomor Terpilih: 242"},
{"label":243,"value":243, "question":"Nomor Terpilih: 243"},
{"label":244,"value":244, "question":"Nomor Terpilih: 244"},
{"label":245,"value":245, "question":"Nomor Terpilih: 245"},
{"label":246,"value":246, "question":"Nomor Terpilih: 246"},
{"label":247,"value":247, "question":"Nomor Terpilih: 247"},
{"label":248,"value":248, "question":"Nomor Terpilih: 248"},
{"label":249,"value":249, "question":"Nomor Terpilih: 249"},
{"label":250,"value":250, "question":"Nomor Terpilih: 250"},
{"label":251,"value":251, "question":"Nomor Terpilih: 251"},
{"label":252,"value":252, "question":"Nomor Terpilih: 252"},
{"label":253,"value":253, "question":"Nomor Terpilih: 253"},
{"label":254,"value":254, "question":"Nomor Terpilih: 254"},
{"label":255,"value":255, "question":"Nomor Terpilih: 255"},
{"label":256,"value":256, "question":"Nomor Terpilih: 256"},
{"label":257,"value":257, "question":"Nomor Terpilih: 257"},
{"label":258,"value":258, "question":"Nomor Terpilih: 258"},
{"label":259,"value":259, "question":"Nomor Terpilih: 259"},
{"label":260,"value":260, "question":"Nomor Terpilih: 260"},
{"label":261,"value":261, "question":"Nomor Terpilih: 261"},
{"label":262,"value":262, "question":"Nomor Terpilih: 262"},
{"label":263,"value":263, "question":"Nomor Terpilih: 263"},
{"label":264,"value":264, "question":"Nomor Terpilih: 264"},
{"label":265,"value":265, "question":"Nomor Terpilih: 265"},
{"label":266,"value":266, "question":"Nomor Terpilih: 266"},
{"label":267,"value":267, "question":"Nomor Terpilih: 267"},
{"label":268,"value":268, "question":"Nomor Terpilih: 268"},
{"label":269,"value":269, "question":"Nomor Terpilih: 269"},
{"label":270,"value":270, "question":"Nomor Terpilih: 270"},
{"label":271,"value":271, "question":"Nomor Terpilih: 271"},
{"label":272,"value":272, "question":"Nomor Terpilih: 272"},
{"label":273,"value":273, "question":"Nomor Terpilih: 273"},
{"label":274,"value":274, "question":"Nomor Terpilih: 274"},
{"label":275,"value":275, "question":"Nomor Terpilih: 275"},
{"label":276,"value":276, "question":"Nomor Terpilih: 276"},
{"label":277,"value":277, "question":"Nomor Terpilih: 277"},
{"label":278,"value":278, "question":"Nomor Terpilih: 278"},
{"label":279,"value":279, "question":"Nomor Terpilih: 279"},
{"label":280,"value":280, "question":"Nomor Terpilih: 280"},
{"label":281,"value":281, "question":"Nomor Terpilih: 281"},
{"label":282,"value":282, "question":"Nomor Terpilih: 282"},
{"label":283,"value":283, "question":"Nomor Terpilih: 283"},
{"label":284,"value":284, "question":"Nomor Terpilih: 284"},
{"label":285,"value":285, "question":"Nomor Terpilih: 285"},
{"label":286,"value":286, "question":"Nomor Terpilih: 286"},
{"label":287,"value":287, "question":"Nomor Terpilih: 287"},
{"label":288,"value":288, "question":"Nomor Terpilih: 288"},
{"label":289,"value":289, "question":"Nomor Terpilih: 289"},
{"label":290,"value":290, "question":"Nomor Terpilih: 290"},
{"label":291,"value":291, "question":"Nomor Terpilih: 291"},
{"label":292,"value":292, "question":"Nomor Terpilih: 292"},
{"label":293,"value":293, "question":"Nomor Terpilih: 293"},
{"label":294,"value":294, "question":"Nomor Terpilih: 294"},
{"label":295,"value":295, "question":"Nomor Terpilih: 295"},
{"label":296,"value":296, "question":"Nomor Terpilih: 296"},
{"label":297,"value":297, "question":"Nomor Terpilih: 297"},
{"label":298,"value":298, "question":"Nomor Terpilih: 298"},
{"label":299,"value":299, "question":"Nomor Terpilih: 299"},
{"label":300,"value":300, "question":"Nomor Terpilih: 300"},
{"label":301,"value":301, "question":"Nomor Terpilih: 301"},
{"label":302,"value":302, "question":"Nomor Terpilih: 302"},
{"label":303,"value":303, "question":"Nomor Terpilih: 303"},
{"label":304,"value":304, "question":"Nomor Terpilih: 304"},
{"label":305,"value":305, "question":"Nomor Terpilih: 305"},
{"label":306,"value":306, "question":"Nomor Terpilih: 306"},
{"label":307,"value":307, "question":"Nomor Terpilih: 307"},
{"label":308,"value":308, "question":"Nomor Terpilih: 308"},
{"label":309,"value":309, "question":"Nomor Terpilih: 309"},
{"label":310,"value":310, "question":"Nomor Terpilih: 310"},
{"label":311,"value":311, "question":"Nomor Terpilih: 311"},
{"label":312,"value":312, "question":"Nomor Terpilih: 312"},
{"label":313,"value":313, "question":"Nomor Terpilih: 313"},
{"label":314,"value":314, "question":"Nomor Terpilih: 314"},
{"label":315,"value":315, "question":"Nomor Terpilih: 315"},
{"label":316,"value":316, "question":"Nomor Terpilih: 316"},
{"label":317,"value":317, "question":"Nomor Terpilih: 317"},
{"label":318,"value":318, "question":"Nomor Terpilih: 318"},
{"label":319,"value":319, "question":"Nomor Terpilih: 319"},
{"label":320,"value":320, "question":"Nomor Terpilih: 320"},
{"label":321,"value":321, "question":"Nomor Terpilih: 321"},
{"label":322,"value":322, "question":"Nomor Terpilih: 322"},
{"label":323,"value":323, "question":"Nomor Terpilih: 323"},
{"label":324,"value":324, "question":"Nomor Terpilih: 324"},
{"label":325,"value":325, "question":"Nomor Terpilih: 325"},
{"label":326,"value":326, "question":"Nomor Terpilih: 326"},
{"label":327,"value":327, "question":"Nomor Terpilih: 327"},
{"label":328,"value":328, "question":"Nomor Terpilih: 328"},
{"label":329,"value":329, "question":"Nomor Terpilih: 329"},
{"label":330,"value":330, "question":"Nomor Terpilih: 330"},
{"label":331,"value":331, "question":"Nomor Terpilih: 331"},
{"label":332,"value":332, "question":"Nomor Terpilih: 332"},
{"label":333,"value":333, "question":"Nomor Terpilih: 333"},
{"label":334,"value":334, "question":"Nomor Terpilih: 334"},
{"label":335,"value":335, "question":"Nomor Terpilih: 335"},
{"label":336,"value":336, "question":"Nomor Terpilih: 336"},
{"label":337,"value":337, "question":"Nomor Terpilih: 337"},
{"label":338,"value":338, "question":"Nomor Terpilih: 338"},
{"label":339,"value":339, "question":"Nomor Terpilih: 339"},
{"label":340,"value":340, "question":"Nomor Terpilih: 340"},
{"label":341,"value":341, "question":"Nomor Terpilih: 341"},
{"label":342,"value":342, "question":"Nomor Terpilih: 342"},
{"label":343,"value":343, "question":"Nomor Terpilih: 343"},
{"label":344,"value":344, "question":"Nomor Terpilih: 344"},
{"label":345,"value":345, "question":"Nomor Terpilih: 345"},
{"label":346,"value":346, "question":"Nomor Terpilih: 346"},
{"label":347,"value":347, "question":"Nomor Terpilih: 347"},
{"label":348,"value":348, "question":"Nomor Terpilih: 348"},
{"label":349,"value":349, "question":"Nomor Terpilih: 349"},
{"label":350,"value":350, "question":"Nomor Terpilih: 350"},
{"label":351,"value":351, "question":"Nomor Terpilih: 351"},
{"label":352,"value":352, "question":"Nomor Terpilih: 352"},
{"label":353,"value":353, "question":"Nomor Terpilih: 353"},
{"label":354,"value":354, "question":"Nomor Terpilih: 354"},
{"label":355,"value":355, "question":"Nomor Terpilih: 355"},
{"label":356,"value":356, "question":"Nomor Terpilih: 356"},
{"label":357,"value":357, "question":"Nomor Terpilih: 357"},
{"label":358,"value":358, "question":"Nomor Terpilih: 358"},
{"label":359,"value":359, "question":"Nomor Terpilih: 359"},
{"label":360,"value":360, "question":"Nomor Terpilih: 360"},
{"label":361,"value":361, "question":"Nomor Terpilih: 361"},
{"label":362,"value":362, "question":"Nomor Terpilih: 362"},
{"label":363,"value":363, "question":"Nomor Terpilih: 363"},
{"label":364,"value":364, "question":"Nomor Terpilih: 364"},
{"label":365,"value":365, "question":"Nomor Terpilih: 365"},
{"label":366,"value":366, "question":"Nomor Terpilih: 366"},
{"label":367,"value":367, "question":"Nomor Terpilih: 367"},
{"label":368,"value":368, "question":"Nomor Terpilih: 368"},
{"label":369,"value":369, "question":"Nomor Terpilih: 369"},
{"label":370,"value":370, "question":"Nomor Terpilih: 370"},
{"label":371,"value":371, "question":"Nomor Terpilih: 371"},
{"label":372,"value":372, "question":"Nomor Terpilih: 372"},
{"label":373,"value":373, "question":"Nomor Terpilih: 373"},
{"label":374,"value":374, "question":"Nomor Terpilih: 374"},
{"label":375,"value":375, "question":"Nomor Terpilih: 375"},
{"label":376,"value":376, "question":"Nomor Terpilih: 376"},
{"label":377,"value":377, "question":"Nomor Terpilih: 377"},
{"label":378,"value":378, "question":"Nomor Terpilih: 378"},
{"label":379,"value":379, "question":"Nomor Terpilih: 379"},
{"label":380,"value":380, "question":"Nomor Terpilih: 380"},
{"label":381,"value":381, "question":"Nomor Terpilih: 381"},
{"label":382,"value":382, "question":"Nomor Terpilih: 382"},
{"label":383,"value":383, "question":"Nomor Terpilih: 383"},
{"label":384,"value":384, "question":"Nomor Terpilih: 384"},
{"label":385,"value":385, "question":"Nomor Terpilih: 385"},
{"label":386,"value":386, "question":"Nomor Terpilih: 386"},
{"label":387,"value":387, "question":"Nomor Terpilih: 387"},
{"label":388,"value":388, "question":"Nomor Terpilih: 388"},
{"label":389,"value":389, "question":"Nomor Terpilih: 389"},
{"label":390,"value":390, "question":"Nomor Terpilih: 390"},
{"label":391,"value":391, "question":"Nomor Terpilih: 391"},
{"label":392,"value":392, "question":"Nomor Terpilih: 392"},
{"label":393,"value":393, "question":"Nomor Terpilih: 393"},
{"label":394,"value":394, "question":"Nomor Terpilih: 394"},
{"label":395,"value":395, "question":"Nomor Terpilih: 395"},
{"label":396,"value":396, "question":"Nomor Terpilih: 396"},
{"label":397,"value":397, "question":"Nomor Terpilih: 397"},
{"label":398,"value":398, "question":"Nomor Terpilih: 398"},
{"label":399,"value":399, "question":"Nomor Terpilih: 399"},
{"label":400,"value":400, "question":"Nomor Terpilih: 400"}
        ];
        var svg = d3.select('#chart')
            .append("svg")
            .data([data])
            .attr("width",  w + padding.left + padding.right)
            .attr("height", h + padding.top + padding.bottom);
        var container = svg.append("g")
            .attr("class", "chartholder")
            .attr("transform", "translate(" + (w/2 + padding.left) + "," + (h/2 + padding.top) + ")");
        var vis = container
            .append("g");
            
        var pie = d3.layout.pie().sort(null).value(function(d){return 1;});
        // declare an arc generator function
        var arc = d3.svg.arc().outerRadius(r);
        // select paths, use arc generator to draw
        var arcs = vis.selectAll("g.slice")
            .data(pie)
            .enter()
            .append("g")
            .attr("class", "slice");
            
        arcs.append("path")
            .attr("fill", function(d, i){ return color(i); })
            .attr("d", function (d) { return arc(d); });
        // add the text
        arcs.append("text").attr("transform", function(d){
                d.innerRadius = 0;
                d.outerRadius = r;
                d.angle = (d.startAngle + d.endAngle)/2;
                return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")translate(" + (d.outerRadius -10) +")";
            })
            .attr("text-anchor", "end")
            .text( function(d, i) {
                return data[i].label;
            });
        container.on("click", spin);
        function spin(d){
            
            container.on("click", null);
            //all slices have been seen, all done
            console.log("OldPick: " + oldpick.length, "Data length: " + data.length);
            if(oldpick.length == data.length){
                console.log("done");
                container.on("click", null);
                return;
            }
            var  ps       = 360/data.length,
                 pieslice = Math.round(1440/data.length),
                 rng      = Math.floor((Math.random() * 1440) + 360);
                
            rotation = (Math.round(rng / ps) * ps);
            
            picked = Math.round(data.length - (rotation % 360)/ps);
            picked = picked >= data.length ? (picked % data.length) : picked;
            if(oldpick.indexOf(picked) !== -1){
                d3.select(this).call(spin);
                return;
            } else {
                oldpick.push(picked);
            }
            rotation += 90 - Math.round(ps/2);
            vis.transition()
                .duration(3000)
                .attrTween("transform", rotTween)
                .each("end", function(){
                    //mark question as seen
                    d3.select(".slice:nth-child(" + (picked + 1) + ") path")
                        .attr("fill", "#111");
                    //populate question
                    d3.select("#question h1")
                        .text(data[picked].question);
                    oldrotation = rotation;
              
                    /* Get the result value from object "data" */
                    console.log(data[picked].value)
              
                    /* Comment the below line for restrict spin to sngle time */
                    container.on("click", spin);
                });
        }
        //make arrow
        svg.append("g")
            .attr("transform", "translate(" + (w + padding.left + padding.right) + "," + ((h/2)+padding.top) + ")")
            .append("path")
            .attr("d", "M-" + (r*.15) + ",0L0," + (r*.05) + "L0,-" + (r*.05) + "Z")
            .style({"fill":"black"});
        //draw spin circle
        container.append("circle")
            .attr("cx", 0)
            .attr("cy", 0)
            .attr("r", 60)
            .style({"fill":"white","cursor":"pointer"});
        //spin text
        container.append("text")
            .attr("x", 0)
            .attr("y", 15)
            .attr("text-anchor", "middle")
            .text("SPIN")
            .style({"font-weight":"bold", "font-size":"30px"});
        
        
        function rotTween(to) {
          var i = d3.interpolate(oldrotation % 360, rotation);
          return function(t) {
            return "rotate(" + i(t) + ")";
          };
        }
        
        
        function getRandomNumbers(){
            var array = new Uint16Array(1000);
            var scale = d3.scale.linear().range([360, 1440]).domain([0, 100000]);
            if(window.hasOwnProperty("crypto") && typeof window.crypto.getRandomValues === "function"){
                window.crypto.getRandomValues(array);
                console.log("works");
            } else {
                //no support for crypto, get crappy random numbers
                for(var i=0; i < 1000; i++){
                    array[i] = Math.floor(Math.random() * 100000) + 1;
                }
            }
            return array;
        }
	</script>
	</body>
</html>
